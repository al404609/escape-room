<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room - Desafío 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        p {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .console {
            background-color: #000;
            color: #0f0;
            font-family: monospace;
            padding: 15px;
            border-radius: 5px;
            width: 80%;
            max-width: 600px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            white-space: pre-wrap;
        }

        .input-area {
            margin-bottom: 20px;
        }

        .input-area textarea {
            width: 80%;
            height: 150px;
            padding: 10px;
            font-family: monospace;
            font-size: 1rem;
            resize: none;
        }

        button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .success {
            color: #0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Desafío 2: Superficie Circular de Actuación</h1>
        <div class="console" id="console"></div>
        <div class="input-area">
            <textarea id="codeInput" placeholder="Escribe tu código aquí..."></textarea>
            <button onclick="checkCode()">Enviar Código</button>
        </div>
    </div>

    <script>
        const consoleDiv = document.getElementById("console");

        const messageLines = [
            "Hola, intrépido reparador...",
            "Nos subestimaron y eso fue su error.",
            "Somos los que llaman los hackers del caos, y hemos logrado algo que ustedes creían imposible.",
            "Tomamos el control del sistema de tráfico de la ciudad, pero aún no hemos completado nuestra obra maestra.",
            "Afectamos el sistema en un área circular, pero más de 31 kilómetros de perímetro han sido afectados.",
            "Aquí viene tu desafío:",
            "Calcula el área total de una ciudad circular con el perímetro indicado. Usa tus conocimientos para hallar la solución.",
            "Una vez que tengas el área, úsala en el código para definir el tiempo de encendido y apagado del LED.",
            "El área debe ser una constante con dos decimales, y los retardos deben ser 'Área / 10'."
        ];

        let lineIndex = 0;

        function displayMessageLine() {
            if (lineIndex < messageLines.length) {
                consoleDiv.textContent += messageLines[lineIndex] + "\n";
                lineIndex++;
                setTimeout(displayMessageLine, 2000);
            }
        }

        displayMessageLine();

        function checkCode() {
            const codeInput = document.getElementById("codeInput").value;

            const correctCode = `#define AREA 76.39

void setup() {
    pinMode(13, OUTPUT);
}

void loop() {
    digitalWrite(13, HIGH);
    delay(AREA / 10);
    digitalWrite(13, LOW);
    delay(AREA / 10);
}`;

            if (codeInput.replace(/\/\/.*|\s/g, '').trim() === correctCode.replace(/\/\/.*|\s/g, '').trim()) {
                window.location.href = 'challenge3.html';
            } else {
                consoleDiv.textContent += "\nCódigo incorrecto. Intenta de nuevo.";
            }
        }
    </script>
</body>
</html>
